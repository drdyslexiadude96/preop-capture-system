<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pre-Operative Dental & Airway Capture System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
.container { max-width:900px; margin:auto; background:white; padding:25px; border-radius:10px; }
h1,h2,h3 { margin-top:25px; }
.section { border-top:1px solid #ddd; padding-top:20px; margin-top:20px; }
.preview { max-width:200px; display:block; margin-top:10px; }
label { display:block; margin:5px 0; }
button { padding:12px 18px; font-size:16px; margin-top:25px; cursor:pointer; }
small { color:#666; }
</style>
</head>

<body>
<div class="container">

<h1>Pre-Operative Dental & Airway Capture System</h1>

<!-- I1 AIRWAY -->
<div class="section">
<h2>I1 – Airway View</h2>
<p><b>Capture:</b> Mouth open, tongue protruded, patient upright</p>
<p><b>Clinical Purpose:</b> Mallampati classification, tongue obstruction</p>

<input type="file" id="I1" accept="image/*" onchange="previewImage(this,'p1')">
<img id="p1" class="preview">

<label><input type="checkbox" id="tongue"> Tongue obstruction noted</label>

<label>Mallampati Class
<select id="mallampati">
<option value="">Select</option>
<option>I</option>
<option>II</option>
<option>III</option>
<option>IV</option>
</select>
</label>
</div>

<!-- DENTITION IMAGES -->
<div class="section">
<h2>I2–I5 – Dentition Images</h2>

<div>
<h3>I2 – Upper Dentition</h3>
<input type="file" id="I2" accept="image/*" onchange="previewImage(this,'p2')">
<img id="p2" class="preview">
<label><input type="checkbox" id="I2_missing"> Missing teeth</label>
<label><input type="checkbox" id="I2_crowns"> Crowns / restorations</label>
<label><input type="checkbox" id="I2_chips"> Chips / fractures</label>
</div>

<div>
<h3>I3 – Lower Dentition</h3>
<input type="file" id="I3" accept="image/*" onchange="previewImage(this,'p3')">
<img id="p3" class="preview">
<label><input type="checkbox" id="I3_missing"> Missing teeth</label>
<label><input type="checkbox" id="I3_crowns"> Crowns / restorations</label>
<label><input type="checkbox" id="I3_chips"> Chips / fractures</label>
</div>

<div>
<h3>I4 – Right Molars</h3>
<input type="file" id="I4" accept="image/*" onchange="previewImage(this,'p4')">
<img id="p4" class="preview">
<label><input type="checkbox" id="I4_missing"> Missing teeth</label>
<label><input type="checkbox" id="I4_crowns"> Crowns / restorations</label>
<label><input type="checkbox" id="I4_chips"> Chips / fractures</label>
</div>

<div>
<h3>I5 – Left Molars</h3>
<input type="file" id="I5" accept="image/*" onchange="previewImage(this,'p5')">
<img id="p5" class="preview">
<label><input type="checkbox" id="I5_missing"> Missing teeth</label>
<label><input type="checkbox" id="I5_crowns"> Crowns / restorations</label>
<label><input type="checkbox" id="I5_chips"> Chips / fractures</label>
</div>
</div>

<!-- OCCLUSION -->
<div class="section">
<h2>I6 – Natural Occlusion</h2>
<p><b>Capture:</b> Frontal bite view</p>
<p><b>Clinical Purpose:</b> Occlusal alignment, instability</p>

<input type="file" id="I6" accept="image/*" onchange="previewImage(this,'p6')">
<img id="p6" class="preview">
<label><input type="checkbox" id="occlusion"> Occlusal instability</label>
</div>

<button onclick="generatePDF()">Generate PDF Report</button>

<p><small>AI-assisted screening support tool. Clinical judgment required.</small></p>

</div>

<script>
function previewImage(input, target) {
  const file = input.files[0];
  if (!file) return;
  document.getElementById(target).src = URL.createObjectURL(file);
}

function yesNo(id){ return document.getElementById(id).checked ? "Yes" : "No"; }

function generatePDF(){
const { jsPDF } = window.jspdf;
const doc = new jsPDF();

let y=20;
doc.setFontSize(16);
doc.text("Pre-Operative Dental & Airway Report",20,y); y+=15;

doc.setFontSize(12);
doc.text(`Mallampati Class: ${document.getElementById("mallampati").value||"Not selected"}`,20,y); y+=8;
doc.text(`Tongue Obstruction: ${yesNo("tongue")}`,20,y); y+=12;

doc.text("Dentition Findings:",20,y); y+=8;

["I2","I3","I4","I5"].forEach(id=>{
doc.text(`${id}:`,25,y); y+=6;
doc.text(`  Missing teeth: ${yesNo(id+"_missing")}`,30,y); y+=6;
doc.text(`  Crowns/restorations: ${yesNo(id+"_crowns")}`,30,y); y+=6;
doc.text(`  Chips/fractures: ${yesNo(id+"_chips")}`,30,y); y+=8;
});

doc.text(`Occlusal Instability: ${yesNo("occlusion")}`,20,y); y+=12;

doc.text("Disclaimer: AI-assisted screening; clinical judgment required.",20,y);

doc.save("PreOp_Dental_Airway_Report.pdf");
}
</script>

</body>
</html>
