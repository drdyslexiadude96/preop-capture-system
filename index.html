<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pre-Operative Capture System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, sans-serif;
  background:#f4f6f8;
  padding:2rem;
}
.card {
  max-width:900px;
  background:white;
  padding:2rem;
  margin:auto;
  border-radius:8px;
}
h1,h2,h3 {
  margin-top:1.5rem;
}
.section {
  border-top:1px solid #ddd;
  padding-top:1.5rem;
  margin-top:1.5rem;
}
.preview {
  max-width:200px;
  display:block;
  margin-top:0.5rem;
}
label {
  display:block;
  margin:0.4rem 0;
}
button {
  margin-top:2rem;
  padding:0.8rem 1.2rem;
  font-size:1rem;
  cursor:pointer;
}
</style>
</head>

<body>
<div class="card">

<h1>Pre-Operative Capture System</h1>

<!-- I1 -->
<div class="section">
<h2>I1 – Airway View</h2>
<input type="file" id="i1" accept="image/*" onchange="preview('i1')">
<img id="i1_preview" class="preview">

<label><input type="checkbox" id="tongue"> Tongue obstruction noted</label>

<label>Mallampati Class
<select id="mallampati">
  <option value="">Select</option>
  <option>I</option>
  <option>II</option>
  <option>III</option>
  <option>IV</option>
</select>
</label>
</div>

<!-- I2–I5 -->
<div class="section">
<h2>I2–I5 – Dentition Images</h2>

<label>I2 – Upper Dentition
<input type="file" id="i2" accept="image/*" onchange="preview('i2')">
<img id="i2_preview" class="preview">
</label>

<label>I3 – Lower Dentition
<input type="file" id="i3" accept="image/*" onchange="preview('i3')">
<img id="i3_preview" class="preview">
</label>

<label>I4 – Right Molars
<input type="file" id="i4" accept="image/*" onchange="preview('i4')">
<img id="i4_preview" class="preview">
</label>

<label>I5 – Left Molars
<input type="file" id="i5" accept="image/*" onchange="preview('i5')">
<img id="i5_preview" class="preview">
</label>

<label><input type="checkbox" id="missing"> Missing teeth</label>
<label><input type="checkbox" id="crowns"> Crowns / restorations</label>
<label><input type="checkbox" id="chips"> Chips / fractures</label>
</div>

<!-- I6 -->
<div class="section">
<h2>I6 – Natural Occlusion</h2>
<input type="file" id="i6" accept="image/*" onchange="preview('i6')">
<img id="i6_preview" class="preview">

<label><input type="checkbox" id="occlusion"> Occlusal instability</label>
</div>

<button onclick="generatePDF()">Generate PDF Report</button>

</div>

<script>
function preview(id) {
  const file = document.getElementById(id).files[0];
  const img = document.getElementById(id + "_preview");
  if (!file) return;
  const reader = new FileReader();
  reader.onload = e => img.src = e.target.result;
  reader.readAsDataURL(file);
}

function generatePDF() {
  let text = `
Pre-Operative Capture Report

I1 – Airway View
Tongue obstruction: ${document.getElementById('tongue').checked}
Mallampati Class: ${document.getElementById('mallampati').value}

Dentition Findings
Missing teeth: ${document.getElementById('missing').checked}
Crowns/restorations: ${document.getElementById('crowns').checked}
Chips/fractures: ${document.getElementById('chips').checked}

I6 – Natural Occlusion
Occlusal instability: ${document.getElementById('occlusion').checked}

Disclaimer:
AI-assisted screening not yet implemented.
Clinical judgment required.
`;

  const blob = new Blob([text], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "PreOp_Report.txt";
  a.click();
}
</script>

</body>
</html>
