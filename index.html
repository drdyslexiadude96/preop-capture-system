<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pre-Operative Capture & Analysis System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
body {
  font-family: system-ui, sans-serif;
  background:#eef2f7;
  padding:2rem;
}
.card {
  background:white;
  max-width:900px;
  margin:auto;
  padding:2rem;
  border-radius:12px;
}
h1 { margin-top:0; }
.section { margin-top:2rem; }
button {
  padding:1rem;
  width:100%;
  border:none;
  border-radius:8px;
  font-size:1rem;
  cursor:pointer;
}
.primary { background:#4f46e5; color:white; }
.secondary { background:#374151; color:white; }
.success { background:#059669; color:white; }
.locked { opacity:.6; pointer-events:none; }
label { display:block; margin:.5rem 0; }
select { padding:.4rem; font-size:1rem; }
</style>
</head>

<body>
<div class="card">

<h1>Pre-Operative Capture System</h1>

<!-- AIRWAY -->
<div class="section">
<h2>I1 â€“ Airway Assessment</h2>

<label>
<input type="checkbox" id="tongue">
 Tongue obstruction noted
</label>

<label>Mallampati Class</label>
<select id="mallampati">
<option value="">Select</option>
<option value="1">I</option>
<option value="2">II</option>
<option value="3">III</option>
<option value="4">IV</option>
</select>
</div>

<!-- DENTITION -->
<div class="section">
<h2>I2â€“I5 â€“ Dentition Findings</h2>

<label><input type="checkbox" id="missing"> Missing teeth</label>
<label><input type="checkbox" id="crowns"> Crowns / restorations</label>
<label><input type="checkbox" id="chips"> Chips / fractures</label>
</div>

<!-- OCCLUSION -->
<div class="section">
<h2>I6 â€“ Natural Occlusion</h2>
<label><input type="checkbox" id="malocclusion"> Occlusal instability</label>
</div>

<!-- ACTIONS -->
<div class="section">
<button class="primary" onclick="generateReport()">ðŸ“„ Generate PDF Report</button>
</div>

<div id="status" class="section"></div>

</div>

<script>
function generateReport() {

  const mall = document.getElementById("mallampati").value;
  if (!mall) {
    alert("Mallampati class required");
    return;
  }

  let airwayRisk = "Low";
  if (mall == 2) airwayRisk = "Moderate";
  if (mall == 3) airwayRisk = "High";
  if (mall == 4) airwayRisk = "Very High";

  if (document.getElementById("tongue").checked && airwayRisk !== "Very High") {
    airwayRisk += " (â†‘ due to tongue obstruction)";
  }

  let dentalRisk = [];
  if (missing.checked) dentalRisk.push("Missing teeth");
  if (crowns.checked) dentalRisk.push("Crowns/restorations");
  if (chips.checked) dentalRisk.push("Chips/fractures");
  if (malocclusion.checked) dentalRisk.push("Occlusal instability");

  const text = `
PRE-OPERATIVE CAPTURE REPORT

AIRWAY
Mallampati Class: ${mall}
Tongue Obstruction: ${tongue.checked}
Airway Risk Level: ${airwayRisk}

DENTAL FINDINGS
${dentalRisk.length ? dentalRisk.join(", ") : "None noted"}

DISCLAIMER:
Structured screening only. Clinical judgment required.
`;

  const blob = new Blob([text], {type:"application/pdf"});
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "PreOp_Report.pdf";
  link.click();

  document.getElementById("status").innerHTML = `
    <h3>âœ… Report Generated</h3>
    <p>Airway Risk: <strong>${airwayRisk}</strong></p>
    <p>Dental Findings: ${dentalRisk.length ? dentalRisk.join(", ") : "None"}</p>
    <p>Provider review complete.</p>
  `;

  document.querySelector(".card").classList.add("locked");
}
</script>

</body>
</html>
