<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pre-Operative Dental & Airway Capture System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: system-ui, sans-serif;
  background:#f4f6f8;
  padding:2rem;
}
.card {
  max-width:900px;
  background:white;
  padding:2rem;
  margin:auto;
  border-radius:8px;
}
.section {
  border-top:1px solid #ddd;
  padding-top:1.5rem;
  margin-top:1.5rem;
}
.preview {
  max-width:200px;
  display:block;
  margin-top:0.5rem;
}
label {
  display:block;
  margin:0.3rem 0;
}
button {
  margin-top:2rem;
  padding:0.8rem 1.2rem;
  font-size:1rem;
  cursor:pointer;
}
.meta {
  font-size:0.9rem;
  color:#444;
}
</style>
</head>

<body>
<div class="card">

<h1>Pre-Operative Dental & Airway Capture System</h1>

<!-- I1 -->
<div class="section">
<h2>I1 – Airway View</h2>
<p class="meta"><strong>Capture:</strong> Mouth open, tongue protruded, patient upright</p>
<p class="meta"><strong>Clinical Purpose:</strong> Mallampati classification, tongue obstruction</p>

<input type="file" id="i1" accept="image/*" onchange="preview('i1')">
<img id="i1_preview" class="preview">

<label><input type="checkbox" id="tongue"> Tongue obstruction noted</label>

<label>Mallampati Class
<select id="mallampati">
  <option value="">Select</option>
  <option>I</option>
  <option>II</option>
  <option>III</option>
  <option>IV</option>
</select>
</label>
</div>

<!-- DENTITION TEMPLATE -->
<script>
function dentitionBlock(id) {
  return `
    <label><input type="checkbox" id="${id}_missing"> Missing teeth</label>
    <label><input type="checkbox" id="${id}_crowns"> Crowns / restorations</label>
    <label><input type="checkbox" id="${id}_chips"> Chips / fractures</label>
  `;
}
</script>

<!-- I2 -->
<div class="section">
<h2>I2 – Upper Dentition</h2>
<p class="meta"><strong>Capture:</strong> Frontal maxillary view with cheek retraction</p>
<p class="meta"><strong>Clinical Purpose:</strong> Missing teeth, crowns, chips</p>

<input type="file" id="i2" accept="image/*" onchange="preview('i2')">
<img id="i2_preview" class="preview">

<div id="i2_findings"></div>
</div>

<!-- I3 -->
<div class="section">
<h2>I3 – Lower Dentition</h2>
<p class="meta"><strong>Capture:</strong> Frontal mandibular view with cheek retraction</p>
<p class="meta"><strong>Clinical Purpose:</strong> Missing teeth, crowns, chips</p>

<input type="file" id="i3" accept="image/*" onchange="preview('i3')">
<img id="i3_preview" class="preview">

<div id="i3_findings"></div>
</div>

<!-- I4 -->
<div class="section">
<h2>I4 – Right Molars</h2>
<p class="meta"><strong>Capture:</strong> Right posterior dentition with cheek displacement</p>
<p class="meta"><strong>Clinical Purpose:</strong> Posterior dental injury risk</p>

<input type="file" id="i4" accept="image/*" onchange="preview('i4')">
<img id="i4_preview" class="preview">

<div id="i4_findings"></div>
</div>

<!-- I5 -->
<div class="section">
<h2>I5 – Left Molars</h2>
<p class="meta"><strong>Capture:</strong> Left posterior dentition with cheek displacement</p>
<p class="meta"><strong>Clinical Purpose:</strong> Posterior dental injury risk</p>

<input type="file" id="i5" accept="image/*" onchange="preview('i5')">
<img id="i5_preview" class="preview">

<div id="i5_findings"></div>
</div>

<!-- I6 -->
<div class="section">
<h2>I6 – Natural Occlusion</h2>
<p class="meta"><strong>Capture:</strong> Frontal bite view with teeth in contact</p>
<p class="meta"><strong>Clinical Purpose:</strong> Occlusal alignment, instability</p>

<input type="file" id="i6" accept="image/*" onchange="preview('i6')">
<img id="i6_preview" class="preview">

<label><input type="checkbox" id="occlusion"> Occlusal instability</label>
</div>

<button onclick="generatePDF()">Generate PDF Report</button>

<p class="meta">AI-assisted screening support tool. Clinical judgment required.</p>

</div>

<script>
function preview(id) {
  const file = document.getElementById(id).files[0];
  const img = document.getElementById(id + "_preview");
  if (!file) return;
  const reader = new FileReader();
  reader.onload = e => img.src = e.target.result;
  reader.readAsDataURL(file);
}

["i2","i3","i4","i5"].forEach(id => {
  document.getElementById(id + "_findings").innerHTML = dentitionBlock(id);
});

function generatePDF() {
  let text = `
Pre-Operative Capture Report

I1 – Airway
Tongue obstruction: ${document.getElementById('tongue').checked}
Mallampati: ${document.getElementById('mallampati').value}

Dentition Findings:
I2 Missing: ${document.getElementById('i2_missing').checked}
I3 Missing: ${document.getElementById('i3_missing').checked}
I4 Missing: ${document.getElementById('i4_missing').checked}
I5 Missing: ${document.getElementById('i5_missing').checked}

I6 Occlusal instability: ${document.getElementById('occlusion').checked}

Disclaimer: Clinical judgment required.
`;

  const blob = new Blob([text], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "PreOp_Report.txt";
  a.click();
}
</script>

</body>
</html>
