<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Pre-Operative Capture System</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
body {
  font-family: system-ui, -apple-system, sans-serif;
  background:#eef2f7;
  padding:2rem;
}
.card {
  max-width:900px;
  margin:auto;
  background:#fff;
  padding:2.5rem;
  border-radius:14px;
  box-shadow:0 12px 40px rgba(0,0,0,.12);
}
h1,h2,h3 { margin-top:0; }
.progress-text { color:#555; font-size:.95rem; }
.progress {
  height:14px;
  background:#ddd;
  border-radius:7px;
  margin:1rem 0 2rem;
}
.progress > div {
  height:100%;
  background:#22c55e;
  border-radius:7px;
}
input { margin-top:1rem; }
img {
  margin-top:1rem;
  max-width:100%;
  border-radius:10px;
  border:1px solid #ccc;
}
button {
  margin-top:1.5rem;
  padding:.9rem 1.6rem;
  border:none;
  border-radius:10px;
  background:#4f46e5;
  color:#fff;
  font-size:1rem;
  cursor:pointer;
}
button.secondary { background:#334155; }
button.export { background:#0f766e; }
button:disabled { background:#9ca3af; }
.analysis-box {
  border:1px solid #ddd;
  border-radius:10px;
  padding:1rem;
  margin-top:1.5rem;
}
label {
  display:block;
  margin:.5rem 0;
}
</style>
</head>

<body>

<div class="card" id="app"></div>

<script>
const steps = [
  "I1 ‚Äì Airway View",
  "I2 ‚Äì Upper Dentition",
  "I3 ‚Äì Lower Dentition",
  "I4 ‚Äì Right Molars",
  "I5 ‚Äì Left Molars",
  "I6 ‚Äì Natural Occlusion"
];

const instructions = [
  "Mouth open, tongue protruded, upright.",
  "Frontal maxillary view.",
  "Frontal mandibular view.",
  "Right posterior teeth.",
  "Left posterior teeth.",
  "Teeth in contact."
];

let current = 0;
let images = [];

const app = document.getElementById("app");

function renderCapture() {
  app.innerHTML = `
    <h1>Pre-Operative Capture System</h1>
    <p class="progress-text">Required Capture ${current+1} of 6</p>
    <div class="progress"><div style="width:${(current/6)*100}%"></div></div>

    <h2>${steps[current]}</h2>
    <p>${instructions[current]}</p>

    <input type="file" id="file" accept="image/*" />
    <img id="preview" style="display:none;" />

    <button id="next" disabled>Next Required Capture</button>
  `;

  const file = document.getElementById("file");
  const preview = document.getElementById("preview");
  const next = document.getElementById("next");

  file.onchange = () => {
    const f = file.files[0];
    if (!f) return;
    const r = new FileReader();
    r.onload = e => {
      images.push(e.target.result);
      preview.src = e.target.result;
      preview.style.display = "block";
      next.disabled = false;
    };
    r.readAsDataURL(f);
  };

  next.onclick = () => {
    current++;
    if (current < 6) renderCapture();
    else renderComplete();
  };
}

function renderComplete() {
  app.innerHTML = `
    <h1>Pre-Operative Capture System</h1>

    <p class="progress-text">Required Capture 6 of 6</p>
    <div class="progress"><div style="width:100%"></div></div>

    <h2>Capture Complete</h2>

    <p>
      <strong>All required images captured.</strong><br><br>
      <em>System is ready for analysis, documentation, or secure export.</em>
    </p>

    <button onclick="renderAnalysis()">üß† Proceed to Analysis</button>
  `;
}

function renderAnalysis() {
  app.innerHTML = `
    <h1>Capture Analysis</h1>
    <p><em>Structured review ‚Äì no AI, no diagnosis.</em></p>

    ${images.map((img,i)=>`
      <div class="analysis-box">
        <h3>${steps[i]}</h3>
        <img src="${img}" />
        <label><input type="checkbox"> Image quality acceptable</label>
        <label><input type="checkbox"> Orientation correct</label>
        <label><input type="checkbox"> Anatomical region visible</label>
        <label><input type="checkbox"> Potential concern noted</label>
      </div>
    `).join("")}

    <button class="secondary" onclick="renderFinal()">Complete Analysis</button>
  `;
}

function renderFinal() {
  app.innerHTML = `
    <h1>Analysis Complete</h1>

    <p>
      <strong>Capture and analysis complete.</strong><br><br>
      Images have been reviewed and annotated for downstream use.
    </p>

    <button class="secondary" onclick="alert('PDF generation is the next build step')">
      üìÑ Generate Capture Report (PDF)
    </button>

    <button class="export" onclick="alert('Secure export is the next build step')">
      üîÅ Export / Secure Handoff
    </button>
  `;
}

renderCapture();
</script>

</body>
</html>
